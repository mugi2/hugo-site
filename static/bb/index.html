<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Content Manager</title>
    <script src="https://unpkg.com/decap-cms@3.4.0/dist/decap-cms.js"></script>
  </head>
  <body>
    <script type="module">
      import Markdown from 'https://esm.sh/react-markdown@9?bundle'
      import remarkMath from 'https://esm.sh/remark-math@6.0.0?bundle'
      import rehypeMathjax from 'https://esm.sh/rehype-mathjax@5.0.0?bundle'
      import remarkGfm from 'https://esm.sh/remark-gfm@4.0.0?bundle'
      import rehypeRaw from 'https://esm.sh/rehype-raw@7.0.0?bundle'

      var PostPreview = createClass({
        render: function() {
          if (this.props.widgetFor('body') != null) {
            return Markdown({
              children: this.props.widgetFor('body').props.value, 
              rehypePlugins: [rehypeMathjax, rehypeRaw],
              remarkPlugins: [remarkMath, remarkGfm]
            });
          } else {
            return '';
          }
        }
      });
      CMS.registerPreviewTemplate("articles", PostPreview);
      CMS.registerPreviewStyle("/bb/preview.css");
    </script>  
  </body>
</html>
